# AWG Split Tunnel — Example Configuration
# Uses WinTUN gateway adapter + WFP per-process interface blocking.
# No adapter_index needed — traffic is routed via TUN adapter automatically.

tunnels:
  - id: awg-germany
    protocol: amneziawg
    name: "AWG Germany"
    settings:
      config_file: "awg-germany.conf"  # Path to AmneziaWG .conf file (required)
      # adapter_ip: "10.8.1.2"         # Optional: override IP from .conf Address

rules:
  # Route Firefox through the German AWG tunnel, block if tunnel is down (kill switch)
  - pattern: "firefox.exe"
    tunnel_id: awg-germany
    fallback: block

  # Route Chrome through tunnel, allow direct if tunnel is down
  - pattern: "chrome"
    tunnel_id: awg-germany
    fallback: allow_direct

  # Block all traffic from processes in C:\blocked\ directory
  - pattern: 'C:\blocked\*'
    fallback: drop

  # Route Steam through tunnel with kill switch
  - pattern: "steam.exe"
    tunnel_id: awg-germany
    fallback: block

# DNS routing configuration (optional).
# Controls how DNS queries are routed per-process.
dns:
  # Tunnel for system DNS queries (svchost.exe, unmatched processes).
  # Omit or leave empty to route through direct (system DNS via real NIC).
  tunnel_id: awg-germany

  # DNS servers for fallback queries.
  # If empty, uses the tunnel's built-in DNS servers from WG config.
  servers:
    - "1.1.1.1"
    - "8.8.8.8"
